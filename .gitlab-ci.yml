image: electronuserland/builder

before_script:
  - apt-get update -qq
  - apt-get install -y -qq sqlite3 libsqlite3-dev nodejs
  - cd analysis-lib
  - npm install
  - mkdir db
  - sqlite3 db/analysis-lib.db < ./src/db-scripts/tables/reset-tables.sql
  - cd ..
  - cd electron-app
  - npm install
  - cd ..

build:windows:
  script:
#    - add-apt-repository ppa:ubuntu-wine/ppa
#    - apt-get update -qq
#    - apt-get install -y wine1.8 wine32 mono-devel
    - cd electron-app
    - npm run build:windows

build:mac:
  script:
    - cd electron-app
    - npm run build:mac

#We already know linux build is running fine, so we area leaving this out while fixing mac/windows builds.
#build:linux:
#  script:
#    - cd electron-app
#    - npm run build:linux
