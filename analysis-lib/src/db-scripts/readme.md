### Databases information

This file keeps track of decision design for each database

## field\_by\_field\_reports

This table will hold field by field reports generated by each filter.
Whenever a test is run, the field by field report is saved on the database.
Rows should be unique, since a filter applied to a TSV report should yield
always the same results. Therefore, if the interface trie to add a repeated row,
SQLite3 throws an error.

The columns are:

* filter\_id => the id of the filter (e.g., filter1) that generated this row;

* filename => the tsv file in which this filter was run

* criteria\_id => a unique key that can be used to look up a test
  (a "filter" in your code). This table will contain a user-visible string to
  explain the filter. The ID is not user-visible.

* test\_data\_row\_id: a foreign key that enables lookup of all the values in a
  row of test data. This corresponds to the table that the TSV is saved to.

* test\_data\_field\_id: the names of the fields for which the error was thrown.
  In case the error involves more than one field, the fields are saved as an
  array string (e.g., "[Track Artist, Track Artist(s) - Featuring(s)]") using
  [JSON.stringify()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify).


* test\_data\_field\_value: the values of the fields for which the error was thrown.
  In case the error involves more than one field, the fields are saved as an
  array string (e.g., "[Various Artists, VA]") using
  [JSON.stringify()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify).

## tsv\_files

A database to keep track of which TSV files are already stored on SQLite3.

The columns are:

* filename => the name of the original TSV file;

* table\_name => the name of the table in SQL this file was stored. By
  convention it is 'orchard\_dataset\_contents\<row\_id\>'

## orchard\_dataset\_contents\_\<id\>

A table that represents a tsv file. The fields can be seen in [the wiki
page](https://gitlab.com/vivadata/orchard-data-tests/wikis/home).
